(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{302:function(e,n,a){},368:function(e,n,a){"use strict";a.r(n);var t=a(24),r=a(25),o=a(28),l=a(26),s=a(27),i=a(0),c=a.n(i),u=a(301),d=a(20),h=a(13),m=a(9),C=a(35),p=a(362),f=a(289),b=a(359),v=a(285),g=a(364),E=(a(302),function(e){var n=e.error,a=e.addChannelModalVisible,t=e.allUsers,r=e.hideModal,o=e.validationError,l=e.channelName,s=e.selectedUsers,i=e.isPrivate,d=e.onSubmit,h=e.onInputChange,m=e.handleDropdownChange,C=e.onCheckboxChange;return c.a.createElement(p.a,{title:"Add Channel",visible:a,okButtonProps:{form:"frmAddChannel",htmlType:"submit"},onCancel:r,width:350,okText:"Create",maskClosable:!1},n&&c.a.createElement(f.a,{message:n,type:"error",showIcon:!0}),c.a.createElement(b.a,{id:"frmAddChannel",onSubmit:d,className:"login-form"},c.a.createElement(b.a.Item,{className:o?"has-error":""},c.a.createElement(v.a,{name:"channel_name",maxLength:25,onChange:h,value:l,placeholder:"Channel name *"}),o&&c.a.createElement("div",{className:"ant-form-explain"},"Please enter channel name")),c.a.createElement(b.a.Item,null,c.a.createElement(u.a,{name:"users",mode:"multiple",style:{width:"100%"},placeholder:"Add users",onChange:m,value:s,allowClear:!0},t)),c.a.createElement(b.a.Item,null,c.a.createElement(g.a,{name:"private",onChange:C,checked:i},"Private Channel"))))});E.defaultProps={validationError:null,channelName:null,error:null};var w=E,j=u.a.Option,k=function(e){function n(){var e,a;Object(t.a)(this,n);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return(a=Object(o.a)(this,(e=Object(l.a)(n)).call.apply(e,[this].concat(s)))).state={error:null,channelName:"",validationError:!1,isPrivate:!1,selectedUsers:[]},a._getAllUsers=function(){var e=a.props.user,n=Object(m.b)(e);if(n)return n.map(function(n){var a=n.id,t=n.name;return e.id!==a?c.a.createElement(j,{key:a},t):null})},a._onSubmitForm=function(e){e.preventDefault();var n=a.props,t=n.user,r=n.room,o=n.rooms,l=a.state,s=l.channelName,i=l.isPrivate,c=l.selectedUsers,u=o.filter(function(e){return e.name.toLowerCase()===s.trim().toLowerCase()}),d=Object.values(r.userStore.users).filter(function(e){return e.name.toLowerCase()===s.trim().toLowerCase()});u[0]||d[0]?a.setState({error:"name '".concat(s,"' is already taken by channel or user.")}):s.trim().length?Object(C.b)(t,s.toLowerCase(),c,i,null,function(e){var n=Object(m.m)(t,e.name,c,"NEW");n&&Object(C.g)(t,e.id,n,function(){},function(){console.log("Error sendind people joined message")}),setTimeout(function(){(0,a.props.joinRoom)(e)},500),a.setState({channelName:"",isPrivate:!1,selectedUsers:[],error:null}),a._closeModal()},function(e){a.setState({error:e.error})}):a.setState({validationError:!0})},a._closeModal=function(){var e=a.props.hideAddChannel;a.setState({validationError:!1,error:null,channelName:"",selectedUsers:[],isPrivate:!1}),e()},a._onInputChange=function(e){return a.setState({channelName:e.target.value})},a._onCheckboxChange=function(e){return a.setState({isPrivate:e.target.checked})},a._onHandleDropdownChange=function(e){return a.setState({selectedUsers:e})},a}return Object(s.a)(n,e),Object(r.a)(n,[{key:"render",value:function(){var e=this.state,n=e.validationError,a=e.channelName,t=e.selectedUsers,r=e.isPrivate,o=e.error,l=this.props.addChannelModalVisible;return c.a.createElement(w,{error:o,addChannelModalVisible:l,allUsers:this._getAllUsers(),validationError:n,channelName:a,selectedUsers:t,isPrivate:r,hideModal:this._closeModal,onSubmit:this._onSubmitForm,onInputChange:this._onInputChange,handleDropdownChange:this._onHandleDropdownChange,onCheckboxChange:this._onCheckboxChange})}}]),n}(i.Component),O=Object(d.b)(function(e){return{user:e.user,room:e.room,rooms:e.rooms,addChannelModalVisible:e.addChannelModalVisible}},function(e){return{joinRoom:function(n){return e(Object(h.j)(n))},hideAddChannel:function(){return e(Object(h.c)())}}})(k);a.d(n,"default",function(){return O})}}]);