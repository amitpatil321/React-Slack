(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{352:function(e,t,n){},365:function(e,t,n){"use strict";n.r(t);var a=n(24),o=n(25),r=n(28),i=n(26),l=n(27),s=n(0),c=n.n(s),m=n(22),u=n(20),h=n(13),d=n(362),p=n(289),f=n(278),b=n(279),C=n(285),j=n(10),v=n(85),E=n(361),g=n(60),y=n.n(g),R=n(9),w=(n(352),function(e){var t=e.user,n=e.text,a=e.onChange,o=e.joinableRooms,r=e.existingRooms,i=e.becomeRoomMember,l=e.gotoRoom,s=e.listChannelsModalVisible,m=e.hideListChannels,u=e.showAddChannel,h=e.fetchComplete,g=e.error;n&&(r=r.filter(function(e){return e.name.toUpperCase().startsWith(n.toUpperCase())}),o=o.filter(function(e){return e.name.toUpperCase().startsWith(n.toUpperCase())}));var w=function(e){var n=e.createdByUserId===t.id?"You":Object(R.g)(e,e.createdByUserId);return"Created by ".concat(n," on ").concat(y()(e.createdAt).format("MMM D, YYYY hh: mm A"))};return c.a.createElement(d.a,{title:"Browse Channels",className:"list-channels",visible:s,onCancel:m,style:{top:"5%"},destroyOnClose:!0},g?c.a.createElement(p.a,{message:g,type:"error",showIcon:!0}):"",c.a.createElement(f.a,null,c.a.createElement(b.a,{span:17},c.a.createElement(C.a,{value:n,placeholder:"Search Channels",prefix:c.a.createElement(j.a,{type:"search"}),onChange:a})),c.a.createElement(b.a,{span:6,className:"float-right"},c.a.createElement(v.a,{type:"primary",onClick:function(){m(),u()}},"Create Channel"))),c.a.createElement("br",null),c.a.createElement("div",{className:"channels-list"},c.a.createElement("div",{className:"chann-divider"},"Channels you can join",h?null:c.a.createElement("span",{className:"float-right"},"Updating list...")),o?c.a.createElement(E.a,{itemLayout:"horizontal",dataSource:o,renderItem:function(e){return c.a.createElement(E.a.Item,null,c.a.createElement(E.a.Item.Meta,{title:e.name,description:w(e)}),c.a.createElement("span",{onClick:function(){i(e)}},c.a.createElement(v.a,{type:"primary",size:"small"},"Join"," ",c.a.createElement(j.a,{type:"user-add"}))))}}):null,c.a.createElement("div",{className:"chann-divider"},"Channels you belong to"),c.a.createElement(E.a,{itemLayout:"horizontal",dataSource:r,renderItem:function(e){return c.a.createElement(E.a.Item,{onClick:function(){m(),l(e)}},c.a.createElement(E.a.Item.Meta,{title:e.name,description:w(e)}),c.a.createElement("span",null,c.a.createElement(j.a,{type:"enter"})))}}),c.a.createElement("br",null)))});w.defaultProps={text:null,showAddChannel:!1,error:null};var O=w,M=n(35),L=function(e){function t(){var e,n;Object(a.a)(this,t);for(var o=arguments.length,l=new Array(o),s=0;s<o;s++)l[s]=arguments[s];return(n=Object(r.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(l)))).state={text:null,error:null,joinableRooms:[],fetchComplete:!1},n._onChange=function(e){var t=e.target.value;n.setState({text:t})},n._becomeRoomMember=function(e){var t=n.props,a=t.user,o=t.hideListChannels,r=t.showLoading,i=t.joinRoom,l=t.showListChannels,s=t.hideLoading;o(),r("Joining room please wait..."),Object(M.e)(a,e,function(e){i(e),s()},function(e){l(),n.setState({error:"Failed to join room, Please try again"}),s()}),n.setState({fetchComplete:!1})},n}return Object(l.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;this._getJoinableRooms(function(t){e.setState({joinableRooms:t,fetchComplete:!1})})}},{key:"shouldComponentUpdate",value:function(e,t){var n=this.props.listChannelsModalVisible,a=this.state,o=a.text,r=a.error,i=a.joinableRooms,l=a.fetchComplete;return n!==e.listChannelsModalVisible||!Object(m.isEqual)(i,t.joinableRooms)||o!==t.text||r!==t.error||l!==t.fetchComplete}},{key:"componentDidUpdate",value:function(){var e=this,t=this.state.joinableRooms;if(t){var n=t.map(function(e){return e.name});this._getJoinableRooms(function(t){var a=t.map(function(e){return e.name});Object(m.isEqual)(n,a)?e.setState({fetchComplete:!0}):e.setState({joinableRooms:t,fetchComplete:!0})})}}},{key:"_getJoinableRooms",value:function(e){var t=this,n=this.props.user;Object(M.d)(n,function(t){return e(t)},function(){return t.setState({error:"Error fetching joinable rooms"})})}},{key:"render",value:function(){var e=this.state,t=e.text,n=e.error,a=e.joinableRooms,o=e.fetchComplete,r=this.props,i=r.user,l=r.room,s=r.rooms,u=r.listChannelsModalVisible,h=r.hideListChannels,d=r.joinRoom,p=r.showAddChannel;return c.a.createElement(O,{user:i,room:l,text:t,onChange:this._onChange,existingRooms:Object(m.filter)(s,{customData:void 0}),joinableRooms:a,becomeRoomMember:this._becomeRoomMember,gotoRoom:d,listChannelsModalVisible:u,hideListChannels:h,fetchComplete:o,showAddChannel:p,error:n})}}]),t}(s.Component),x=Object(u.b)(function(e){return{user:e.user,room:e.room,rooms:e.rooms,listChannelsModalVisible:e.listChannelsModalVisible}},function(e){return{showListChannels:function(){return e(Object(h.p)())},hideListChannels:function(){return e(Object(h.g)())},showLoading:function(t){return e(Object(h.q)(t))},hideLoading:function(){return e(Object(h.h)())},joinRoom:function(t){return e(Object(h.j)(t))},showAddChannel:function(){return e(Object(h.l)())}}})(L);n.d(t,"default",function(){return x})}}]);